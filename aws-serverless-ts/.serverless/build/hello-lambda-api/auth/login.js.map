{
  "version": 3,
  "sources": ["../../../../hello-lambda-api/auth/login.ts"],
  "sourcesContent": ["import { CognitoIdentityProviderClient, InitiateAuthCommand } from \"@aws-sdk/client-cognito-identity-provider\";\n\nconst client = new CognitoIdentityProviderClient({ region: \"us-east-1\" });\n\nexport const login = async (event: any) => {\n  try {\n    const body = typeof event.body === \"string\" ? JSON.parse(event.body) : event.body;\n    console.log(\"Received body:\", body);\n\n    const { email, password } = body;\n\n    if (!email || !password) {\n      throw new Error(\"Email or password missing from request body\");\n    }\n\n    const command = new InitiateAuthCommand({\n      AuthFlow: \"USER_PASSWORD_AUTH\",\n      ClientId: \"3t1cipggjjbcapot79o3duomsm\",\n      AuthParameters: {\n        USERNAME: email,\n        PASSWORD: password,\n      },\n    });\n\n    const response = await client.send(command);\n\n    return {\n      statusCode: 200,\n      body: JSON.stringify({\n        message: \"Login successful\",\n        tokens: response.AuthenticationResult,\n      }),\n    };\n  } catch (error: any) {\n    console.log(\"Error\", error);\n    return {\n      statusCode: 400,\n      body: JSON.stringify({\n        error: \"Login failed\",\n        details: error.message,\n      }),\n    };\n  }\n};\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CAAmE;AAEnE,IAAM,SAAS,IAAI,sEAA8B,EAAE,QAAQ,YAAY,CAAC;AAEjE,IAAM,QAAQ,OAAO,UAAe;AACzC,MAAI;AACF,UAAM,OAAO,OAAO,MAAM,SAAS,WAAW,KAAK,MAAM,MAAM,IAAI,IAAI,MAAM;AAC7E,YAAQ,IAAI,kBAAkB,IAAI;AAElC,UAAM,EAAE,OAAO,SAAS,IAAI;AAE5B,QAAI,CAAC,SAAS,CAAC,UAAU;AACvB,YAAM,IAAI,MAAM,6CAA6C;AAAA,IAC/D;AAEA,UAAM,UAAU,IAAI,4DAAoB;AAAA,MACtC,UAAU;AAAA,MACV,UAAU;AAAA,MACV,gBAAgB;AAAA,QACd,UAAU;AAAA,QACV,UAAU;AAAA,MACZ;AAAA,IACF,CAAC;AAED,UAAM,WAAW,MAAM,OAAO,KAAK,OAAO;AAE1C,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,MAAM,KAAK,UAAU;AAAA,QACnB,SAAS;AAAA,QACT,QAAQ,SAAS;AAAA,MACnB,CAAC;AAAA,IACH;AAAA,EACF,SAAS,OAAY;AACnB,YAAQ,IAAI,SAAS,KAAK;AAC1B,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,MAAM,KAAK,UAAU;AAAA,QACnB,OAAO;AAAA,QACP,SAAS,MAAM;AAAA,MACjB,CAAC;AAAA,IACH;AAAA,EACF;AACF;",
  "names": []
}
